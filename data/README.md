# EnPractice 数据目录说明

本目录包含EnPractice插件的所有静态数据文件。**注意：所有用户数据现已完全迁移至VS Code的globalState API，不再使用文件系统存储用户练习数据。**

## 📁 目录结构

```
data/
├── config/                 # 配置文件
│   └── wordbooks.json         # 词典列表信息
├── dicts/                  # 词典文件
│   ├── hongbaoshu-2026.json        # 红宝书2026词典（顺序版）
│   ├── hongbaoshu-2026_shuffled.json # 红宝书2026词典（乱序版）
│   ├── NCE_1.json                  # 新概念英语第1册（顺序版）
│   ├── NCE_1_shuffled.json         # 新概念英语第1册（乱序版）
│   ├── NCE_2.json                  # 新概念英语第2册（顺序版）
│   ├── NCE_2_shuffled.json         # 新概念英语第2册（乱序版）
│   ├── NCE_3.json                  # 新概念英语第3册（顺序版）
│   ├── NCE_3_shuffled.json         # 新概念英语第3册（乱序版）
│   ├── NCE_4.json                  # 新概念英语第4册（顺序版）
│   └── NCE_4_shuffled.json         # 新概念英语第4册（乱序版）
```

## 📚 词典文件格式

### 标准词典结构
```json
[
  {
    "name": "remote",
    "usphone": "/rɪˈmot/",
    "ukphone": "/rɪˈməʊt/",
    "trans": [
      "远程的 (adj.)",
      "遥控器 (n.)"
    ]
  }
]
```

### 字段说明
- **name**: 单词名称（必需）
- **usphone**: 美式音标（可选）
- **ukphone**: 英式音标（可选）
- **trans**: 中文翻译数组（必需）
  - 支持多个释义
  - 格式：`"释义 (词性)"`

## ⚙️ 配置文件

### wordbooks.json - 词典列表
```json
[
  {
    "id": "hongbaoshu-2026-shuffled",
    "name": "红宝书2026（乱序）",
    "description": "考研英语词汇红宝书（乱序）",
    "length": 4858,
    "category": "考研",
    "tags": ["考研", "高频", "乱序"],
    "url": "hongbaoshu-2026_shuffled.json"
  }
]
```

## 📊 数据存储说明

### 静态数据（仍在文件系统中）
- **词典文件**：存储在`data/dicts/`目录下
- **配置文件**：存储在`data/config/`目录下

### 用户数据（已迁移至GlobalState）
所有用户数据现已完全迁移至VS Code的`globalState` API进行持久化存储：

- **设置数据**：存储在`globalState`的`enpractice.settings`键下
- **练习记录**：按词典和章节分片存储在`globalState`中
- **每日记录**：按日期存储在`globalState`中
- **分析报告**：存储在`globalState`中

### 优势
1. **零文件I/O**：完全避免文件系统操作，响应速度极快
2. **更高的可靠性**：使用VS Code内置的存储机制，数据更安全
3. **更好的性能**：内存操作，亚毫秒级响应时间
4. **更简单的维护**：无需管理文件读写和路径问题
5. **跨平台兼容**：VS Code自动处理不同操作系统的存储差异

## 🔧 数据管理

### 自动创建
插件会自动创建必要的数据结构：
- 首次启动时初始化基础数据结构
- 练习时自动创建记录数据
- 每日自动创建当日记录数据

### 数据备份
- 建议启用VS Code设置同步以实现跨设备数据同步
- 提供数据导出/导入功能（通过数据查看器）

### 性能优化
- **零文件I/O**: 完全使用GlobalState存储
- **按需加载**: 只加载当前需要的数据
- **异步操作**: 不阻塞用户界面
- **内存操作**: 亚毫秒级响应时间

## 🛠️ 开发者说明

### 添加新词典
1. 将词典JSON文件放入 `dicts/` 目录
2. 更新 `wordbooks.json` 添加词典信息
3. 重启插件即可使用

### 数据查看和管理
- 使用插件内置的"Data Viewer"功能查看和管理所有数据
- 支持数据导出、导入和重置

### 故障排除
- 插件会自动修复损坏的数据结构
- 严重问题时可使用数据查看器重置数据
- 提供数据导出/导入功能

## ⚠️ 注意事项

- 词典文件必须使用UTF-8编码
- 建议启用VS Code设置同步以实现跨设备数据同步
- 用户练习数据完全存储在VS Code的globalState中，不再生成任何用户数据文件